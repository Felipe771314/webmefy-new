{% capture extra_section_style %}
  --prev-next-button-background: {{ section_background.red }}, {{ section_background.green }}, {{ section_background.blue }};
  --prev-next-button-color: {{ text_color.red }}, {{ text_color.green }}, {{ text_color.blue }};
{% endcapture %}

{% capture content %}
  <testimonial-list {% if section.settings.reveal_on_scroll %}reveal-on-scroll{% endif %} class="testimonial-list">
    <div class="testimonial-list__wrapper">
      {%- for block in section.blocks -%}
        <testimonial-item {% unless forloop.first %}hidden{% endunless %} id="block-{{ section.id }}-{{ block.id }}" class="testimonial" {{ block.shopify_attributes }}>
          <blockquote class="testimonial__content blockquote">
            <split-lines {% if section.settings.reveal_on_scroll or forloop.first == false %}reveal-visibility{% endif %}>{{ block.settings.content | escape }}</split-lines>
          </blockquote>

          {%- if block.settings.author != blank -%}
            <p {% if section.settings.reveal_on_scroll or forloop.first == false %}reveal-visibility{% endif %} class="testimonial__author">{{ block.settings.author | escape }}</p>
          {%- endif -%}
        </testimonial-item>
      {%- endfor -%}
    </div>

    {%- if section.blocks.size > 1 -%}
      <div class="testimonial-list__nav">
        <prev-next-buttons class="testimonial-list__prev-next-buttons prev-next-buttons prev-next-buttons--row hidden-phone">
          <button class="testimonial-list__arrow prev-next-button prev-next-button--prev">
            <span class="visually-hidden">{{ 'general.accessibility.previous' | t }}</span>
            {%- include 'icon' with 'nav-arrow-left', direction_aware: true -%}
          </button>

          <button class="testimonial-list__arrow prev-next-button prev-next-button--next">
            <span class="visually-hidden">{{ 'general.accessibility.next' | t }}</span>
            {%- include 'icon' with 'nav-arrow-right', direction_aware: true -%}
          </button>
        </prev-next-buttons>

        <page-dots class="testimonial-list__dots dots-nav hidden-tablet-and-up">
          {%- for block in section.blocks -%}
            <button class="dots-nav__item tap-area" {% if forloop.first %}aria-current="true"{% endif %}>
              <span class="visually-hidden">{{ 'general.accessibility.go_to_slide' | t: num: forloop.index }}</span>
            </button>
          {%- endfor -%}
        </page-dots>
      </div>
    {%- endif -%}
  </testimonial-list>
{% endcapture %}

{% render 'section-layout', content: content, extra_section_style: extra_section_style, module: 'testimonials' %}
