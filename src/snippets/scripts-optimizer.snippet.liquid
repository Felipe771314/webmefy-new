<script type="text/worker" id="tozworker">
  onmessage = function (e) {
    postMessage(
      `window.TozOptimize=function(){let e,t=!1;const n=["mouseover","keydown","touchmove","touchstart","wheel"];let i=performance.getEntriesByType("navigation");const o={bubbles:!0,cancelable:!0};let a=[];function r(){window.SwiftObserver.disconnect(),i[0].loadEventEnd>0&&void 0!==document.removeEventListeners&&(document.removeEventListeners("DOMContentLoaded"),document.removeEventListeners("load")),n.forEach((function(e){console.log("deactivate toz action >>",e),window.removeEventListener(e,r,{passive:!0})})),function(){let e=document.querySelectorAll('script[type="text/tozscript"]:not([data-swift-pre-init])'),n=[];e.forEach((function(e){n.push((function(t){!function(e,t){var n=document.createElement("script");n.type = e.dataset.type === "module" ? "module" : "text/javascript",n.async=!1,n.id=e.id||"",Object.assign(n.dataset,e.dataset),e.src?(n.onload=t,n.onerror=t,n.src=e.src,a.push({type:"src",url:e.src})):(n.textContent=e.innerText,a.push({type:"context",context:e.innerText}));f(e),document.body.appendChild(n),e.src||t()}(e,t)}))})),s(n,t?l:c)}()}function s(e,t,n){e[n=n||0]?e[n]((function(){s(e,t,n+1)})):t&&t()}function c(){if(i[0].loadEventEnd<=0)return;d("DOMContentLoaded"),d("readystatechange"),d("load");const e=new UIEvent("resize",Object.assign({view:window,detail:!1},o));window.dispatchEvent(e),document.dispatchEvent(e)}function d(e,t){t=t||o;const n=new Event(e,t);window.dispatchEvent(n),document.dispatchEvent(n)}function l(){const e=new CustomEvent("swiftScriptPreInited",{detail:a});document.dispatchEvent(e)}function u(e){throw new URIError("The script"+e.target.src+" didn't load correctly.")}function p(e){const{url:t,content:n="",dataSet:i,id:o,isAsync:a=!1,isDefer:r=!1,isHeader:s=!1}=e;return new Promise(((e,c)=>{let d=document.createElement("script");d.type="text/javascript",a&&(d.async=!0),!a&&r&&(d.defer=r),o&&(d.id=o),i&&"object"==typeof i&&Object.assign(d.dataset,{...i,swiftPreInit:"preinited"}),t?d.src=t:d.textContent=n,d.dataset.swiftPreInit="preinited",d.onload=()=>e(!0),d.onerror=e=>{u(e),c(!0)},s?document.head.append(d):document.body.append(d),t||e(!0)}))}function f(e,t){t?(e.replaceWith(e.cloneNode(!0)),e.remove()):e.parentNode.removeChild(e)}return{getInstance:function(i){return e||(e=function(e){return t=!!e||!1,n.forEach((function(e){console.log("active toz action >>",e),window.addEventListener(e,r,{passive:!0})})),n}(i)),e},helper:function(){console.table([["TozOptimize.getInstance(isUseCustomEvent)","isUseCustomEvent is option params, if not using createAndDispatchPageLoadEvents, just set params is 'true', if using custom event swiftScriptPreInited, document.addEventListener('swiftScriptPreInited', (e)=>console.log(e.detail)) to listen event"],["TozOptimize.dispatchEventManual('DOMContentLoaded')","Fired when the document has been completely loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading."],["TozOptimize.dispatchEventManual('readystatechange')","The readystatechange event is fired when the readyState attribute of a document has changed. https://developer.mozilla.org/en-US/docs/Web/API/Document/readystatechange_event"],["TozOptimize.dispatchEventManual('load')","Fired when the whole page has loaded, including all dependent resources such as stylesheets images."],["TozOptimize.dispatchEventaLL()","dispatch events DOMContentLoaded, readystatechange, load"],["TozOptimize.loadScript(setup)","Load script manual with argrument setup is object {url, content = '', dataSet, id, isAsync = false, isDefer = false, isHeader = false} "],["TozOptimize.loadStyleUrl(url)","Load style from url, return promise"],["TozOptimize.preloadImage(url, hasPriority)","preload link image from url, hasPriority just option, set true if need priority high"],["TozOptimize.getTrackingDelay()","Tracking delay script"],["TozOptimize.removeNodeScript()","clear node Script to support load manual"],["TozOptimize.excuteSwiftPreInit()","excute all script have dataset swift"]]),console.log("More detail at https://developer.mozilla.org/en-US/docs/Web/API/Window#events")},dispatchEventManual:d,dispatchEventaLL:c,loadScript:p,loadStyleUrl:function(e){return new Promise(((t,n)=>{let i=document.createElement("link");i.href=e,i.rel="stylesheet",i.onload=()=>t(!0),i.onerror=e=>{u(e),n(!0)},document.head.append(i)}))},preloadImage:function(e,t){return new Promise((()=>{let n=document.createElement("link");n.href=e,n.rel="preload",t&&(n.fetchPriority="high"),n.as="image",n.onerror=e=>{u(e),rej(!0)},document.head.append(n)}))},getTrackingDelay:function(){return a},removeNodeScript:f,excuteSwiftPreInit:async function(){let e=[];return document.querySelectorAll('script[type="text/tozscript"][data-swift-pre-init]:not([data-swift-pre-init="preinited"])').forEach((t=>{e.push(t)})),e.length?await async function(e){return await e.reduce((async function(e,t){let n=await e,i="";const o={...t.dataset},a=t.id;return i=t.src?"preinit is "+await p({url:t.src,dataSet:o,id:a,isDefer:!0})+", url >>> "+t.src:"preinit is "+await p({content:t.textContent,dataSet:o,id:a})+", content >>> "+t.textContent,f(t),n.push(i),n}),Promise.resolve([]))}(e):"not found script"}}}(),window.TozOptimize.getInstance();`
    );
  };
</script>
<script type="text/javascript">
  var tozx = new Worker('data:text/javascript;base64,' + btoa(document.getElementById('tozworker').textContent));
  (tozx.onmessage = function (t) {
    var e = document.createElement('script');
    (e.type = 'text/javascript'), (e.textContent = t.data), document.head.appendChild(e);
  }),
    tozx.postMessage('init');
</script>
<script type="text/javascript" data-toz="1">
  (function(){
  	function delayScriptByType(node, SwiftPreInit){
  	  if(node.type === 'module'){
        node.dataset.type = 'module';
      }
  		node.type = 'text/tozscript';
  		if(SwiftPreInit) node.dataset.swiftPreInit = SwiftPreInit;
  	}

  	window.SwiftObserver = new MutationObserver((mutations) => {
  		const tagAllow = ['IMG', 'IFRAME'];
  		const scriptTypeAllow = ['application/ld+json', 'application/json'];
  		mutations.forEach(({ addedNodes }) => {
  			addedNodes.forEach((node) => {
  				const isScript =node.nodeType === 1 && node.tagName === 'SCRIPT',
  					isPreInited = isScript ? (!node.dataset.swiftPreInit || node.dataset.swiftPreInit !== 'preinited') : false ;
  				const mainRuleScript = isScript && !scriptTypeAllow.includes(node.type) && isPreInited;
  				if(!mainRuleScript && !tagAllow.includes(node.tagName) ) return;


  				if (mainRuleScript && node.className == 'analytics') delayScriptByType(node);
  		  //theme toz
  		  else if (node.src.includes('assets')) delayScriptByType(node);
  		  else if (node.src.includes('judge.me')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('judge.me')) delayScriptByType(node);
  		  else if (node.src.includes('jdgm')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('jdgm')) delayScriptByType(node);
  		  else if (node.src.includes('recaptcha')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('recaptcha')) delayScriptByType(node);
  		  else if (node.src.includes('monorail-edge')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('monorail-edge')) delayScriptByType(node);
  		  else if (node.src.includes('webPixels')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('webPixels')) delayScriptByType(node);
  		  else if (node.src.includes('wpm')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('wpm')) delayScriptByType(node);
  		  else if (node.src.includes('analytics')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('analytics')) delayScriptByType(node);
  		  else if (node.src.includes('Analytics')) delayScriptByType(node);
  		  else if (node.innerHTML.includes('Analytics')) delayScriptByType(node);



  				else if (node.innerHTML.includes('asyncLoad')) delayScriptByType(node);
  				else if (node.innerHTML.includes('hotjar')) delayScriptByType(node);
  				else if (node.innerHTML.includes('gtag')) delayScriptByType(node);
  				else if (node.innerHTML.includes('gtm')) delayScriptByType(node);
  				else if (node.src.includes('googlet')) delayScriptByType(node);
  				else if (node.innerHTML.includes('storefront/bars')) delayScriptByType(node);
  				else if (node.src.includes('storefront/bars')) delayScriptByType(node);
  				else if (node.innerHTML.includes('facebook.net')) delayScriptByType(node);
  				else if (node.src.includes('facebook.net')) delayScriptByType(node);
  				else if (node.innerHTML.includes('warehouseBoot.js')) delayScriptByType(node);
  				else if (node.src.includes('warehouseBoot.js')) delayScriptByType(node);
  				else if (node.innerHTML.includes('theme.min.js')) delayScriptByType(node);
  				else if (node.src.includes('theme.min.js')) delayScriptByType(node);
  				else if (node.innerHTML.includes('bundle.min.js')) delayScriptByType(node);
  				else if (node.src.includes('bundle.min.js')) delayScriptByType(node);
  				else if (node.innerHTML.includes('jquery')) delayScriptByType(node);
  				else if (node.src.includes('jquery')) delayScriptByType(node);
  				else if (node.innerHTML.includes('oz-app-swatches')) delayScriptByType(node);
  				else if (node.src.includes('oz-app-swatches')) delayScriptByType(node);

  				else if (node.innerHTML.includes('custom.js')) delayScriptByType(node);
  				else if (node.src.includes('custom.js')) delayScriptByType(node);
  				else if (node.innerHTML.includes('axept')) delayScriptByType(node);
  				else if (node.src.includes('axept')) delayScriptByType(node);
  				else if (node.innerHTML.includes('skeepers')) delayScriptByType(node);
  				else if (node.src.includes('skeepers')) delayScriptByType(node);
  				else if (node.innerHTML.includes('avis-verifies')) delayScriptByType(node);
  				else if (node.src.includes('avis-verifies')) delayScriptByType(node);
  				else if (node.innerHTML.includes('doofinder')) delayScriptByType(node);
  				else if (node.src.includes('doofinder')) delayScriptByType(node);
  				else if (node.innerHTML.includes('pinimg')) delayScriptByType(node);
  				else if (node.src.includes('pinimg')) delayScriptByType(node);
  				else if (node.innerHTML.includes('bat.bing.com')) delayScriptByType(node);
  				else if (node.src.includes('bat.bing.com')) delayScriptByType(node);
  				else if (node.innerHTML.includes('probance')) delayScriptByType(node);
  				else if (node.src.includes('probance')) delayScriptByType(node);
  				else if (node.innerHTML.includes('oxiapps')) delayScriptByType(node);
  				else if (node.src.includes('oxiapps')) delayScriptByType(node);
  				else if (node.innerHTML.includes('smile.io')) delayScriptByType(node);
  				else if (node.src.includes('smile.io')) delayScriptByType(node);

  				else if (node.innerHTML.includes('extensions')) delayScriptByType(node);
  				else if (node.src.includes('extensions')) delayScriptByType(node);
  				else if (node.innerHTML.includes('boomerang')) delayScriptByType(node);
  				else if (node.src.includes('boomerang')) delayScriptByType(node);
  				else if (node.src.includes('shopifycloud')) delayScriptByType(node);


             {% if template.name == "product" %}
  				else if (node.innerHTML.includes('getshogun')) delayScriptByType(node);
  				else if (node.src.includes('getshogun')) delayScriptByType(node);
  				else if (node.id === 'web-pixels-manager-setup') delayScriptByType(node);
             {% endif %}

  				else if(node.tagName==='IMG'){
  					if(node.tagName==='IMG'){
  						node.loading='lazy';
  					}
  					else if(node.className.includes('image-fit promo-grid__bg-image promo-grid__bg-image--')){
  						TozOptimize.preloadImage(node.dataset.src, true);
  					}

  				}
  				else if (node.tagName === 'IFRAME') {
  					node.loading = 'lazy';
  					let lazysrc = node.src;
  					node.setAttribute('lazy-src',lazysrc);
  					node.src = '';
  				}
  			});
  		});
  	});
  	const ua = navigator && navigator.userAgent.toString().toLowerCase();
  	if (ua.indexOf("chrome") > -1) {
  		SwiftObserver.observe(document.documentElement, {
  			childList: true,
  			subtree: true,
  		});
  	}
  })();
</script>
